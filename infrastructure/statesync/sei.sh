#!/bin/bash
set -uxe

# set environment variables
export GOPATH=~/go
export PATH=$PATH:~/go/bin

# MAKE HOME FOLDER AND GET GENESIS
seid init test 
wget -O ~/.sei/config/genesis.json https://raw.githubusercontent.com/sei-protocol/testnet/main/sei-incentivized-testnet/genesis.json

INTERVAL=1000

# GET TRUST HASH AND TRUST HEIGHT

LATEST_HEIGHT=$(curl -s https://rpc-sei-test.ecostake.com:443/block | jq -r .result.block.header.height);
BLOCK_HEIGHT=$(($LATEST_HEIGHT-$INTERVAL)) 
TRUST_HASH=$(curl -s "https://rpc-sei-test.ecostake.com:443/block?height=$BLOCK_HEIGHT" | jq -r .result.block_id.hash)

# GET TRUST HASH AND TRUST HEIGHT

LATEST_HEIGHT=$(curl -s https://rpc-sei-test.ecostake.com:443/block | jq -r .result.block.header.height);
BLOCK_HEIGHT=$(($LATEST_HEIGHT-$INTERVAL)) 
TRUST_HASH=$(curl -s "https://rpc-sei-test.ecostake.com:443/block?height=$BLOCK_HEIGHT" | jq -r .result.block_id.hash)


# TELL USER WHAT WE ARE DOING
echo "TRUST HEIGHT: $BLOCK_HEIGHT"
echo "TRUST HASH: $TRUST_HASH"


# export state sync vars
export SEID_STATESYNC_ENABLE=true
export SEID_P2P_MAX_NUM_OUTBOUND_PEERS=200
export SEID_STATESYNC_RPC_SERVERS="https://rpc-sei-test.ecostake.com:443,https://rpc-sei-test.ecostake.com:443"
export SEID_STATESYNC_TRUST_HEIGHT=$BLOCK_HEIGHT
export SEID_STATESYNC_TRUST_HASH=$TRUST_HASH
export SEID_P2P_SEEDS="df1f6617ff5acdc85d9daa890300a57a9d956e5e@sei-atlantic-1.seed.rhinostake.com:16660"

seid start --x-crisis-skip-assert-invariants --p2p.laddr tcp://0.0.0.0:2420 --rpc.laddr tcp://127.0.0.1:2421 --grpc.address 127.0.0.1:2422 --grpc-web.address 127.0.0.1:2423 --p2p.persistent_peers 999a446589bba86890e3ab1e13908669c678ab0e@38.242.134.206:12656,ff0511e7e4076d3a3dce7af05713a027fa735e7d@194.163.146.160:26656,fff0124e02f8000a4e7087f3e79e93655a071337@65.108.201.15:28656,250be501849092fe09a22e48e61fe546d0ea35ab@38.242.148.59:26656,2e583460b140b64c6f9eb18a95075ba6179feb76@45.55.36.210:12656,5ea0dafbb7728ca9b50f2858450bad55c1c765cf@38.242.143.128:26656,8e42af86d5e48c5beb43aab5cf08e9d8d42f55e5@45.10.154.116:26656,8ff4bd654d7b892f33af5a30ada7d8239d6f467b@91.223.3.190:51656,f59e7b60b7f66a5e368ae6d5c69c35967722ae45@65.108.15.48:26656,e7823ca2b4d5247a3efbfeef071b7412518c34f9@195.201.241.25:36656,47fd6eb5fa4d7c8035b5ac0fa7129129a0c61206@38.242.151.244:26656,5655a653dced418db92ed6dd6183733edcab870b@149.102.154.116:12656,ff42efccd227fecb5e22dd467d5297ddb6b12d97@161.97.104.157:26656,793dd1e279d67ee6b2da169da839375c1632f563@185.215.164.184:12656,adefc7510a224e27db64369733d5b411c59213b6@138.68.152.102:12656,2b11ed8b37907542c813e4d85371319dfa3d0928@159.69.125.201:26656,7cbf61d56b0be9e49ca06bc647b00c964c5dbaad@194.163.137.193:26656,0f96b5718537830dbda43609d4a84f8d02da855e@174.138.31.181:12656,2f1e8842dec0a60c79d8fedfe420697661c837c8@195.3.221.191:26656,93be4770d7e761b945cbbf70ac30864f368c3491@185.252.235.81:36656,74be5b0cf7c9a9263f408f068eb9b9e05cefe0d8@77.241.20.200:26656,4a29963ca47b046cd160af54c3a684c8e39c6335@109.107.180.88:26656,aecae471c37933026275856919a25a9e9a1bff24@65.109.18.171:12656,151559f454736bbefa2b7e250c8f369eeb8f35a8@38.242.241.42:26656,831bb33646296e63f2e88f1f9ae25361eaa8533b@89.58.45.204:36656,1ea5ec28d6cf3cb7c9b3fca3dac42d772077ba9a@5.161.98.82:26656,64015673786d295e287989f69b56f212f26fe4be@65.108.230.75:26656,101241989b4ee15caccc56058dc14e9bb6f59230@38.242.144.168:12656,1c17963fdf686def330c5c7969b1d13939751977@128.199.165.244:12656,2c7c52b72348fc535336a358234c3d087c81ad07@38.242.195.134:26656,bd9641a334d6d10b5fdb55b623bab103be8ba5ff@65.108.244.167:26656,a37d65086e78865929ccb7388146fb93664223f7@18.144.13.149:26656,7438c415b48e548df6ddd84e3ac70d320ea3b2ae@135.181.31.44:26656,59d61b09374c7b6c5c7c4eab3caba14c9158d0eb@85.10.244.226:26656,fe27cdcfc4fc68e9447baa2c2e22f14ab30b114c@207.231.104.10:30656,6a5113e8412f68bbeab733bb1297a0a38f884f7c@65.108.14.10:26656,74e18c0ecf9e7c7e20b8079d5434bc0d6ad39c75@162.55.223.216:26656,da80b7ee0e1e98024d2d05d6fc54ec4c65fd65b7@38.242.138.87:26656,ccb0d01563842cdda7ef8cf07e4c44c99a3b3383@185.205.244.88:12656,43c2d6ca43cef155830be31aff1c277cbcae1d95@116.203.228.93:12656,b82dd4104cb39931e17af4af83edc95492f92d68@38.242.148.182:26656,4241eec6c623ff9346d2a7562ca24a70dff880c2@65.21.138.123:29656,c4ca43aa8b9040dbbd90b2d56b74c6d5419fbc4c@38.242.156.251:12656,2672e7a02959952df1d00946b05008456dfdd1df@88.208.57.200:60756,2182e327ab84f98d5dad431c41aa0b04d400c771@88.99.105.36:26656,7f0960fb4cb46877036cd9bbb7b5b4c0d428a25b@65.108.204.119:46656,d3738176158f41baf4bae64af7b91d78e2baac4f@40.76.138.187:12656,073b6c00dc786fd838a324400fab8c384f211635@85.173.113.198:23656,f8c791861b3db47182777befb583496a5e6600dd@38.242.246.157:26656,072b3d089e47aa47e944a4362f0a4d697090cf79@125.212.225.198:26666,7c5d26f019f1430ecbe3f69bb62aea176ca399f9@65.21.7.111:26656,585d845ee80d9f595ab5bf593a9d68961bb6a635@65.108.199.79:20956,d263b81b76bfcb9f8ccc1657a303b59c3f102976@135.181.201.209:26656,836be52d954cb756fe010b227aee140d62aa9afc@95.217.196.224:26656,be5f2b00dbbb1942942de44414a9ac408e986bb8@51.142.90.249:12656,6c8024780655807576a870bbf126854432f85a96@172.104.228.45:26656,dd02e52d4b04926d9bb378ed95eb4221acf6013d@173.212.226.128:12656,08ed17b41869f56f14b7e02fbb01055cc69d1fb8@178.62.122.235:12656,5be5aa3ffe6d26e29e93e20111165261a444aceb@144.91.95.10:26656,6e9896011909b31f642f5371640b71aee380c962@38.242.239.125:12656,675500a6a218f88e30f2be1af6f514161e66d394@167.99.91.150:26656,97ee485012d2cb0cc68add8e065269b6eba2c6a5@162.55.181.128:26656,36c3ce38ec208133dd6f1e2ca7f9fec071ea104b@65.108.207.236:26656,ce2988f3740452990b05ddcdd5a39f17ddaabee3@65.108.199.62:26656,8805d8ce152c8a252540febedd1f48f75055d949@167.235.76.249:26656,21fb0d7039441b0af45aa1901d97ff33c83033af@65.108.255.200:26656,3de20b80b0230642cb3415a18ba22642e5456523@65.108.138.183:8095,5dc35fd7ef0832a3fa9240d67a9a87c3755d3606@88.99.214.188:26656,0ada55f797a6412a675488d5a8572e0022652277@168.119.168.174:26656,edc2fe2d61ed3c3f3dbca9a3e44c7174231ee958@20.51.219.62:12656,4f0bc3010ab5df10ae2ae83185c4c6e4cee3960b@95.216.213.72:26656,74457a1afee9c389e9973c8c438b54e8942c06c1@65.108.9.25:26656,94b6fa7ae5554c22e81a81e4a0928c48e41801d8@88.99.3.158:10956,f8820c97bd6c3d86a25984690c2f7304f39d6eb4@162.55.175.5:26656,1983a907c06a84bcebe95ac47201115e5a001119@137.184.43.9:12656,4b8d694de8ae2348f6aea37a835ee9cd9bbfaed1@144.76.224.246:20656,2ec6074b6153b987c7f886732e78c172783a2990@104.248.146.194:12656,8536f475269173ef632affe42f1a558c78fdd168@116.203.229.214:26656,97a5ec09e8009b1007f390f907e0edf083aea57e@173.249.38.225:26656,51fa77cdb21248bef7e62bb937995a073f0d9920@167.99.193.220:12656,94333ca011b2d28102a7093d7ebff7598d6e8614@20.83.60.76:12656,9738001ef288ae02f6f283843ccc516e3068f031@185.202.239.16:26656,815a0a767c892691b8a021f0ca738c0fa3547e7c@95.111.248.231:27656,3b6089173ba10ac6ab071488fca61acb581c91f8@142.132.202.98:26656,b7cc2f6e543a967c36fde4e27d75e45e667d2cd4@164.68.96.184:12656,cef97bced15e01fe2d45cfb7ed97b8b16b951ea1@167.71.128.18:12656,aa20b3d5cc77dd9b31ad7fecaa6afbf45e7a902d@68.183.188.80:26656,aa7a6912a0994175d58265827c1426b9b1ebf8aa@85.114.134.203:12656,494177c1a186bf5fb8ac33b0dc8a88735404020d@167.86.89.29:26656,8bd7bd4cfce28f5226f422fd85845e949cf6dfd0@65.108.246.4:26656,9a2e2c907b914741dc2515aa25bb81c3fb408dc2@95.217.235.163:26656,13d75da34cc85d1fe6ee55af73dd10657302d45f@195.201.34.43:26656,fc36e1cd5cc33d2f54ce6b2454b31979122150f6@65.108.232.160:26656,266cd7ad80248ba7590de9402f0c6500f116ae52@167.235.243.205:26656,dcc6889f3a073336833df6d0129da103d120c1cc@38.242.227.102:12656,a1bb40f1146c9976b313ce5f9e9c411d41f4d718@66.94.118.178:26656,494f845721018a3049ddbbec7a49b70458283e41@45.94.209.32:26656,24b0380575999359cde7760f39ae677dac88da54@66.94.101.212:12656,4e64eead0e0e896a963d564a581efce0d833fbe3@65.21.132.27:29656,c739ec23676f9a57cedf9dd5e9cf39e956f8fa8c@135.181.108.220:26656,63afe38e8d7eea198a1a5cf59f030073262c57e3@144.76.67.53:26656,a30b0392b456c467a8fe9f66ba6103c2867bbbbe@159.69.110.238:26656,a70a77ce2ff20d4c98edbd7edc8c95c5c8b54268@51.222.248.153:26656,635c32b8c21b35b62570b4155fa9425f8e4358cf@5.161.105.13:26656,0b9a00e58f0cb237bdefd95ffb3b3f3e0f80d413@65.108.99.250:11301,2a3f0f4eba61703df8755e12971bb79542efe621@163.172.51.186:12656,17f8a5aaf74dae76a3ec6a03daf671a77ecd3915@116.202.227.117:12656,1d7f521ce30cb7add144961115538cad07025dbf@65.108.140.101:10656,96f1f3e4bbf64fd79f4fc2f5c452f7823b713814@125.212.225.216:26666,305f6cade922c15dd494a42dbf969d9831d6ff1c@178.18.255.145:10656,c4e8c9b1005fe6459a922f232dd9988f93c71222@65.108.227.133:26656,08fc44bf9a024582bfd4ff6a8c6ec597634126b8@95.214.52.173:26651,e4d32f81b3ca7493522eed98b6339295bd77be75@185.231.155.145:26656,06e699d13f89b7251b0f740126d672440c47df38@161.97.140.192:26656,b52eb2396ca46a9bc560551bfa020bbd7c65cc60@144.76.168.83:26656,b1e0fbd3ce6313c299593f2e7491526b49b39952@138.201.51.114:27656,b11f6a95435c949d68bf172c93c873601d76edba@45.151.122.108:26656,91126015dbb34339ad14c7a396b649bc65688381@38.242.154.111:26656,72eef9f00d00dc54c3c0e343b62f52922389a371@185.237.252.117:12656,d4a758af2b68c8c61316c4e6bcae7dc836eba78d@38.242.244.159:12656,18f9f8aa7a6a32807635e9cdebb5d8cb939b0cbf@95.214.52.206:26656,830953e60981b9d77a4bd2d17820ecd11872abfc@65.108.201.154:3030,242ec52f0ed12c43e13ae8566469e1d60cf78930@38.242.129.72:26656,a6b6d036a294f66c49e7edb9396f9cbd83b4554e@154.12.227.115:26656,df121cb5fd4fff48385466d6f32611c29b98a5e0@34.224.25.134:26656,35af19d2d6cfff8961b365a55cc70b224ce4c239@143.198.236.138:12656,84f1a529b650bbbf3e45a08b23cfebeddcf5bc04@159.223.218.129:26656,771e6ab4d7c435f7f64e1b40c757fef30059c70e@159.223.145.7:26656,507ed84f150cfabace2401f11d967c9f14705318@65.108.121.37:16656,89e7d8c9eefc1c9a9b3e1faff31c67e0674f9c08@165.227.11.230:26656,3b5ae3a1691d4ed24e67d7fe1499bc081c3ad8b0@65.108.131.189:20956,6b1a49094f287d6077c2105d5f5cff2740be7446@2.58.82.21:26656,f0b909366c34934599328fa2943c3c53cd01b819@38.242.148.213:26656,27238e2f804bf28a14c186a2e0f0ceaae0d2588f@49.12.132.167:26656,f3812fce78648e6ce90c268123c9455944332efa@161.97.145.143:26656,62243a5f8b5033d172c891c65f8a12ea44f75e82@45.85.146.224:26656,688726ee964b0c1a102e1a8ca169a5e2089fc4a7@65.108.45.200:26858,da3b78f73a1e554cb1d0d6bee5dd4d973a123d90@65.21.91.50:11104,7235757f5a370d78ce9b0643e8941e3ec081a008@62.171.129.81:27656,d73db24eb68da02480346d2bbfc41154c567106d@176.124.208.207:26656,d219f1887474782dc598d789460439abeb3f87c7@194.163.165.244:12656,e7e2709a829c739dd841a81c79aa1783d97665c3@149.102.142.221:26656,4ca9670fc013ee1ed284778b43d58ee879b2b178@188.34.162.248:26656,803bf3311c3bb529af5ada321ae38d1ebdbde04f@185.208.206.175:26656,abcad9ef3cfef5c965def6b4061954bd7534eeb2@66.94.115.92:12656,823ab6d0432920219e7662e0945f751ff9d78dab@38.242.128.236:27656,41201eb40de8d89c9e481dea3bc520289945d466@149.102.138.214:26656,62ecc461e078d4bd74b1e6aa0497a4ed5cdcb8c7@46.63.100.22:12656,85d02c570ffca44047bee45385eefd59b1ad6b29@194.147.58.74:12656,d9f1c99b09fdf7d76a50ac529bfd06666d459240@109.197.217.35:26656,8a3c8b44be3dd3527870b3981a222bef8e452ecd@185.202.223.139:26656,fa171308e13744a7abe53e24ab6baa14c7311a23@38.242.155.24:26656,3bacbfb3cd1a81e1008fcf6b08ad41a4f220470e@185.217.127.53:26656,d879748dde806fa7e7e8d741fe311f28ef7cb997@20.92.146.192:12656,741dd53f9a4176a372c292c04405b8064a43bf30@161.97.173.61:26656,81273358060a44e8db686082d704578375f79609@65.21.207.188:26656,16b8cec3d04fbba98d88eac70c95eb0eeb42545a@38.242.210.93:26656,27effcd26238cf987b2cf6695c1d961a59d833ba@38.242.198.5:12656,8b418588806a607c2e1c8883c1041080b0f7a72f@146.19.24.139:26656,18ccd5b0077e34d5518b7bf594d7029f7f9a7005@80.209.236.192:26656,4f468449df3bedb25313fb6b6a90bc5dbd383a82@125.212.225.201:21656,aa840849965905ce22b1b77f8014fd723fe1b358@65.108.208.96:26656,15aae2d53d378cf84108c301cfb17170de28ad03@51.159.142.106:26656,2d4dc14ad9759e653bac76890e017da41e2e7b88@185.182.184.251:12656,adf15cad78f6fc13f471af4e81464fc7e1f9367b@38.242.134.197:26656,08ab7f116ea91591ebee9826d16697f6bedcce58@38.242.156.250:12656,ca628217568cefba3d974e0e99cc6b74dab0464c@213.136.70.209:26656,9ec59d77355655a5b0535cea438f84cab0e0bbb3@103.136.85.89:26656,72e765dd43fe81a57a1698db7dc1319be77a2385@194.61.28.199:10656,6b0253818910ab8aac90177f3fb3141280848294@135.181.58.99:26656,50a60868f8aa1ac3c16aaac5f26c6c7b31db24fd@65.108.7.120:27656,3e665a9ff9807ee175ebdfa10e052dca46128fcb@194.34.232.248:26656,1b1dccf59d4ceb4c66e6db968263334a230f8f0a@162.55.223.23:26656,4ad15249b5dadb638df284496fc54f0708835856@66.94.107.225:12656,7660d653c1a23f15abb27803d398a1fc59c035ce@167.172.49.69:12656,9df41b07bb407c465b6e4a258885bd9f2a97599b@38.242.220.157:12656,a9089dc972b755a52e66d70ccce707fefa4beabf@162.55.99.50:26656,23e617a7f7f2b4e330fb1be4d265c5ac9b8daa5b@207.244.232.190:26656,9975ce899cf3962deeae9d90653f3b3c95385198@149.102.138.181:26656,f560fab8dd5c61d557704e932dc7f4537ec53fe9@38.242.148.176:26656,5d1a5de17963d0305243680bff56c6ebee4b79ee@147.135.254.37:12656,b9cd52cd2d955e00ecf740b231b717e41f1c22a2@38.242.138.17:26656,cc00b8c3520eff060d0231c5546bbc67ea83f5c7@5.161.116.64:12656,3e51e41ee801a75025deaa899e404b23944be55c@45.85.147.140:12656,98f43e1eb2741d616a8816e620f594412cb3a346@161.35.238.88:12656,55471ab816f651ca80a3a09d58b4833ac3661b7a@38.242.156.245:12656
